---
title: "ê°•ë ¥í•œ Django ì¸ì¦ ì‹œìŠ¤í…œ: Auth, ì¿ í‚¤, ì„¸ì…˜, ê·¸ë¦¬ê³  êµ¬í˜„ ê°€ì´ë“œ"
author: mminzy22
date: 2025-01-11 10:01:00 +0900
categories: [Django]
tags: [Bootcamp, Python, Django, TIL]
description: "Djangoì˜ ê°•ë ¥í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ í™œìš©í•˜ì—¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆì„ ê°•í™”í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤. Auth, ì¿ í‚¤, ì„¸ì…˜ì˜ ê°œë…ê³¼ êµ¬í˜„ ê°€ì´ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤."
pin: false
---



### 01. Authë€?

ì›¹ ê°œë°œì—ì„œ ë¹ ì§ˆ ìˆ˜ ì—†ëŠ” ìš”ì†Œ ì¤‘ í•˜ë‚˜ê°€ **Auth(ì¸ì¦)**ì…ë‹ˆë‹¤. Django ì—­ì‹œ ê°•ë ¥í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.

#### `settings.py` ì‚´í´ë³´ê¸°

Djangoì˜ ì¸ì¦ ì‹œìŠ¤í…œì€ ê¸°ë³¸ì ìœ¼ë¡œ `settings.py` íŒŒì¼ì— ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- `django.contrib.auth` : ì¸ì¦ì˜ í•µì‹¬ ë¡œì§ê³¼ ê¸°ë³¸ ëª¨ë¸ ì œê³µ
- `django.contrib.contenttypes` : ì‚¬ìš©ì ëª¨ë¸ê³¼ ê¶Œí•œì„ ì—°ê²°

#### ì¸ì¦(Authentication)ê³¼ ê¶Œí•œ(Authorization)

AuthëŠ” **Authentication(ì¸ì¦)**ê³¼ **Authorization(ê¶Œí•œ)**ì„ í¬í•¨í•©ë‹ˆë‹¤:

- **Authentication(ì¸ì¦)** : ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸í•˜ëŠ” ì ˆì°¨
- **Authorization(ê¶Œí•œ)** : ì‚¬ìš©ìê°€ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì ˆì°¨


### 02. HTTPì™€ ì¿ í‚¤(cookie), ì„¸ì…˜(session) í•„ìš”ì„±

#### HTTP íŠ¹ì§•

ì›¹ í†µì‹ ì€ HTTP ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. HTTPì˜ ì£¼ìš” íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- **ë¹„ì—°ê²° ì§€í–¥(Connectionless)** : ìš”ì²­-ì‘ë‹µ í›„ ì—°ê²°ì´ ì¢…ë£Œë©ë‹ˆë‹¤.
- **ë¬´ìƒíƒœ(Stateless)** : ì´ì „ ìš”ì²­ì˜ ìƒíƒœë¥¼ ê¸°ì–µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ìš”ì²­ì€ ë…ë¦½ì ì…ë‹ˆë‹¤.

ì´ëŸ¬í•œ íŠ¹ì§• ë•Œë¬¸ì— ì›¹ì—ì„œëŠ” **ì¿ í‚¤**ì™€ **ì„¸ì…˜**ì´ í•„ìš”í•©ë‹ˆë‹¤. ë§Œì•½ ì¿ í‚¤ì™€ ì„¸ì…˜ì´ ì—†ë‹¤ë©´ ë§¤ë²ˆ ë¡œê·¸ì¸ì„ ë°˜ë³µí•´ì•¼ í•˜ë©°, ì´ëŠ” ì‚¬ìš©ì ê²½í—˜ì„ í¬ê²Œ ì €í•˜ì‹œí‚µë‹ˆë‹¤.


#### ì¿ í‚¤(Cookie)ë€?

- ì¿ í‚¤ëŠ” ì„œë²„ê°€ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•˜ëŠ” ì‘ì€ ë°ì´í„° ì¡°ê°ì…ë‹ˆë‹¤.
- ë°ì´í„°ëŠ” **Key-Value** í˜•íƒœë¡œ ì €ì¥ë˜ë©°, ë¸Œë¼ìš°ì €ì— ì €ì¥ëœ ì¿ í‚¤ëŠ” ì´í›„ ê°™ì€ ì„œë²„ì— ë³´ë‚´ëŠ” ìš”ì²­ë§ˆë‹¤ í•¨ê»˜ ì „ì†¡ë©ë‹ˆë‹¤.

**ì¿ í‚¤ì˜ í™œìš© ì‚¬ë¡€**

- **ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥**: ì‚¬ìš©ìê°€ ë‹´ì€ ìƒí’ˆ ì •ë³´ë¥¼ ì €ì¥
- **ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡**: ë§ì¶¤í˜• ê´‘ê³  ì œê³µ
- **"ì˜¤ëŠ˜ ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°" ë²„íŠ¼**: ì„¤ì • ì •ë³´ë¥¼ ì €ì¥

**ì¿ í‚¤ì™€ ê°œì¸ì •ë³´ ë³´í˜¸**

ì¿ í‚¤ëŠ” ì‚¬ìš©ìì˜ ê²€ìƒ‰ ê¸°ë¡ì„ ê¸°ë°˜ìœ¼ë¡œ ë§ì¶¤í˜• ê´‘ê³ ì— ì£¼ë¡œ í™œìš©ë©ë‹ˆë‹¤. ì´ì— ë”°ë¼ ê°œì¸ì •ë³´ ë³´í˜¸ì— ëŒ€í•œ ìš°ë ¤ê°€ ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤:

- êµ¬ê¸€ í¬ë¡¬ì€ 2024ë…„ë¶€í„° ì¿ í‚¤ ì œì•½ì„ ë°œí‘œí•˜ì—¬ ê´‘ê³  ì‹œì¥ì˜ ë³€í™”ë¥¼ ì˜ˆê³ í–ˆìŠµë‹ˆë‹¤.

> ğŸ’¡ **í•œ ì¤„ ì •ë¦¬**: ì¿ í‚¤ëŠ” ì„œë²„ê°€ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©°, ì´í›„ ìš”ì²­ë§ˆë‹¤ ì´ ë°ì´í„°ë¥¼ í¬í•¨í•´ ì„œë²„ì— ì „ë‹¬í•©ë‹ˆë‹¤.


#### ì„¸ì…˜(Session) / ì¿ í‚¤ë§Œìœ¼ë¡œ ë¶€ì¡±í•œ ì´ìœ 

ì¿ í‚¤ëŠ” ì‚¬ìš©ìì˜ ë¡œì»¬ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ì•…ì˜ì ìœ¼ë¡œ ë³€ì¡°ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ **ì„¸ì…˜**ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ì„¸ì…˜ì˜ ì—­í• **

ì„¸ì…˜ì€ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ **ìƒíƒœ(State)**ë¥¼ ê¸°ì–µí•˜ê¸° ìœ„í•œ ë°©ë²•ì…ë‹ˆë‹¤. ì£¼ìš” ë™ì‘ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì ‘ì†í•˜ë©´, ì„œë²„ê°€ ê³ ìœ í•œ **session ID**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
2. ì´ **session ID**ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•˜ê³ , ì„œë²„ëŠ” ì´ë¥¼ ê¸°ì–µí•©ë‹ˆë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ëŠ” **session ID**ë¥¼ ì¿ í‚¤ì— ì €ì¥í•©ë‹ˆë‹¤.
4. ì´í›„ ìš”ì²­ë§ˆë‹¤ í´ë¼ì´ì–¸íŠ¸ëŠ” ì¿ í‚¤ì— ì €ì¥ëœ **session ID**ë¥¼ ì„œë²„ì— ì „ë‹¬í•©ë‹ˆë‹¤.
5. ì„œë²„ëŠ” **session ID**ë¥¼ ê²€ì¦í•œ í›„ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

> ğŸ’¡ ë¯¼ê°í•œ ì •ë³´ëŠ” ì¿ í‚¤ê°€ ì•„ë‹Œ ì„œë²„ì—ì„œ ê´€ë¦¬í•˜ê³ , ì¿ í‚¤ì—ëŠ” ì„¸ì…˜ IDë§Œ ì €ì¥í•©ë‹ˆë‹¤.

**ì¿ í‚¤ì˜ ìˆ˜ëª…**

- **ì„¸ì…˜ ì¿ í‚¤(Session Cookie)** : ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ì‚­ì œë©ë‹ˆë‹¤.
- **ì§€ì† ì¿ í‚¤(Persistent Cookie)** : ë””ìŠ¤í¬ì— ì €ì¥ë˜ë©°, ë¸Œë¼ìš°ì €ë¥¼ ë‹«ê±°ë‚˜ ì¬ë¶€íŒ…í•´ë„ ìœ ì§€ë©ë‹ˆë‹¤. (ë‹¨, `Max-Age`ë¥¼ ì„¤ì •í•˜ì—¬ ìœ íš¨ê¸°ê°„ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)


**Djangoì˜ Sessionê³¼ Auth**

DjangoëŠ” ì„¸ì…˜ê³¼ ì¸ì¦(Auth) ê´€ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê°œë°œìëŠ” Djangoì˜ ë‚´ì¥ ê¸°ëŠ¥ì„ í™œìš©í•´ ë¹ ë¥´ê³  ì•ˆì „í•˜ê²Œ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



### 03. Django Authentication System ê°œìš”

DjangoëŠ” ì¸ì¦(Authentication)ê³¼ ê¶Œí•œ(Authorization)ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê°•ë ¥í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì„ í†µí•´ ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, íšŒì› ê°€ì…, ê¶Œí•œ ë¶€ì—¬ ë“±ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ’¡ Djangoì˜ Authentication Systemì€ ì„¸ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•˜ë©°, ì‚¬ìš©ì ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.


#### Django Authentication System êµ¬í˜„í•˜ê¸°

**1. `accounts` ì•± ìƒì„± ë° URL ì—°ê²°**

ì¸ì¦ê³¼ ê´€ë ¨ëœ ë¡œì§ì€ ì¼ë°˜ì ìœ¼ë¡œ ë³„ë„ì˜ `accounts` ì•±ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.

1. `accounts` ì•± ìƒì„±:

    ```bash
    python manage.py startapp accounts
    ```

2. í”„ë¡œì íŠ¸ì˜ `urls.py`ì™€ ì—°ê²°:

    ```python
    from django.urls import include, path

    urlpatterns = [
        path('accounts/', include('accounts.urls')),
    ]
    ```

3. `accounts/urls.py`:

    ```python
    from django.urls import path
    from . import views

    app_name = "accounts"
    urlpatterns = [
        path("login/", views.login, name="login"),
        path("logout/", views.logout, name="logout"),
    ]
    ```


**2. ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„**

**`accounts/views.py`**:
1. `login` ë·° (1ì°¨ êµ¬í˜„):

    ```python
    from django.shortcuts import render
    from django.contrib.auth.forms import AuthenticationForm

    def login(request):
        form = AuthenticationForm()
        context = {"form": form}
        return render(request, "accounts/login.html", context)
    ```

2. `login` í…œí”Œë¦¿:
    **`accounts/templates/accounts/login.html`**:

    ```html
    {% raw %}
    {% extends "base.html" %}

    {% block content %}
    <h1>ë¡œê·¸ì¸</h1>

    <form action="{% url 'accounts:login' %}" method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">ë¡œê·¸ì¸</button>
    </form>
    {% endblock content %}
    {% endraw %}
    ```

3. `login` ë·° (2ì°¨ êµ¬í˜„):
    - POST ìš”ì²­ìœ¼ë¡œ ë¡œê·¸ì¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ìˆ˜ì •:

    ```python
    from django.shortcuts import render, redirect
    from django.contrib.auth import login as auth_login
    from django.contrib.auth.forms import AuthenticationForm

    def login(request):
        if request.method == "POST":
            form = AuthenticationForm(data=request.POST)
            if form.is_valid():
                auth_login(request, form.get_user())
                return redirect("index")  # ë¡œê·¸ì¸ í›„ ì´ë™í•  í˜ì´ì§€
        else:
            form = AuthenticationForm()
        context = {"form": form}
        return render(request, "accounts/login.html", context)
    ```

> ğŸ’¡ DjangoëŠ” `AuthenticationForm`ê³¼ `auth_login`ì„ ì œê³µí•˜ì—¬ ìµœì†Œí•œì˜ ì½”ë“œë¡œ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


**3. ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ êµ¬í˜„**

**`accounts/views.py`**:

```python
from django.contrib.auth import logout as auth_logout

def logout(request):
    if request.method == "POST":
        auth_logout(request)
    return redirect("index")
```

**`accounts/templates/base.html`**:
- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë§í¬ ì¶”ê°€:

```html
{% raw %}
<div class="navbar">
    {% if request.user.is_authenticated %}
        <h3>ì•ˆë…•í•˜ì„¸ìš”, {{ user }}ë‹˜</h3>
        <form action="{% url 'accounts:logout' %}" method="POST">
            {% csrf_token %}
            <input type="submit" value="ë¡œê·¸ì•„ì›ƒ">
        </form>
    {% else %}
        <a href="{% url 'accounts:login' %}">ë¡œê·¸ì¸</a>
    {% endif %}
</div>
{% endraw %}
```


**4. `is_authenticated`ì™€ `@login_required` í™œìš©**

**`is_authenticated`**
- í…œí”Œë¦¿ì—ì„œ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©:

    ```html
    {% raw %}
    {% if request.user.is_authenticated %}
        <h3>í™˜ì˜í•©ë‹ˆë‹¤, {{ user.username }}!</h3>
    {% else %}
        <a href="{% url 'accounts:login' %}">ë¡œê·¸ì¸</a>
    {% endif %}
    {% endraw %}
    ```

**`@login_required`**
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ íŠ¹ì • ë·°ì— ì ‘ê·¼í•˜ë„ë¡ ì œí•œ:

    ```python
    from django.contrib.auth.decorators import login_required

    @login_required
    def profile(request):
        return render(request, "accounts/profile.html")
    ```

> ğŸ’¡ `@login_required` ë°ì½”ë ˆì´í„°ëŠ” ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ìë¥¼ `settings.LOGIN_URL`ì— ì„¤ì •ëœ ê²½ë¡œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤.


**5. `createsuperuser`ë¡œ ê´€ë¦¬ì ê³„ì • ìƒì„±**

DjangoëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê´€ë¦¬ìë¥¼ ìœ„í•œ **superuser** ìƒì„± ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

```bash
python manage.py createsuperuser
```

- ìƒì„±ëœ superuser ê³„ì •ì€ Django Admin í˜ì´ì§€(`http://127.0.0.1:8000/admin/`)ì— ë¡œê·¸ì¸í•˜ì—¬ ì‚¬ìš©ì ê´€ë¦¬ ë° ê¸°íƒ€ ì„¤ì • ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


**Django Authentication System ìš”ì•½**

- Djangoì˜ ì¸ì¦ ì‹œìŠ¤í…œì€ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ, ì„¸ì…˜ ê´€ë¦¬, ì‚¬ìš©ì ì¸ì¦ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì œê³µë˜ëŠ” **AuthenticationForm**, **auth_login**, **auth_logout**, **@login_required**ì™€ ê°™ì€ ë„êµ¬ë¥¼ í™œìš©í•˜ë©´ ìµœì†Œí•œì˜ ì½”ë“œë¡œ ì¸ì¦ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Django Adminê³¼ ì—°ê³„í•˜ë©´ ì‚¬ìš©ìë¥¼ ì†ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
